#summary How to evaluate an expression from a Java program

There are 2 options for evaluating an expression
  # direct Java integration
  # and JSR223Support based scripting engine support

= Direct Java integration integration=
{{{
package org.maheclipse.examples;

import org.matheclipse.core.eval.EvalUtilities;
import org.matheclipse.core.expression.F;
import org.matheclipse.core.form.output.OutputFormFactory;
import org.matheclipse.core.form.output.StringBufferWriter;
import org.matheclipse.core.interfaces.IExpr;

import edu.jas.kern.ComputerThreads;

public class EvalExpand {
  public static void main(String[] args) {
    // static intialization of the MathEclipse engine
    // instead of null you can set a file name to overload the default initial
    // rules:
    F.initSymbols(null);
    EvalUtilities util = new EvalUtilities();

    IExpr result;

    try {
      StringBufferWriter buf = new StringBufferWriter();
      String input = "Expand[(AX^2+BX)^2]";
      result = util.evaluate(input);
      OutputFormFactory.get().convert(buf, result);
      String output = buf.toString();
      System.out.println("Expanded form for " + input + " is " + output);

      // set some variable values
      input = "A=2;B=4";
      result = util.evaluate(input);

      buf = new StringBufferWriter();
      input = "Expand[(A*X^2+B*X)^2]";
      result = util.evaluate(input);
      OutputFormFactory.get().convert(buf, result);
      output = buf.toString();
      System.out.println("Expanded form for " + input + " is " + output);
      
      buf = new StringBufferWriter();
      input = "Factor["+output+"]";
      result = util.evaluate(input);
      OutputFormFactory.get().convert(buf, result);
      output = buf.toString();
      System.out.println("Factored form for " + input + " is " + output);
    } catch (final Exception e) {
      e.printStackTrace();
    } finally {
      ComputerThreads.terminate();
    }

  }
}
}}}

= JSR 223 Example =

{{{
package org.maheclipse.examples;

import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;

import edu.jas.kern.ComputerThreads;

public class EvalExpandJSR223 {
  public static void main(String[] args) {
    ScriptEngineManager scriptManager = new ScriptEngineManager();
    ScriptEngine engine_1 = scriptManager.getEngineByExtension("m");

    try {
      String input = "Expand[(AX^2+BX)^2]";
      String output = (String) engine_1.eval(input);
      System.out.println("Expanded form for " + input + " is " + output);

      // set some variable values 
      input = "A=2;B=4";
      engine_1.eval(input);

      input = "Expand[(A*X^2+B*X)^2]";
      output = (String) engine_1.eval(input);
      System.out.println("Expanded form for " + input + " is " + output);

      input = "Factor[" + output + "]";
      output = (String) engine_1.eval(input);
      System.out.println("Expanded form for " + input + " is " + output);

    } catch (Exception ex) {
      ex.printStackTrace();
    } finally {
      ComputerThreads.terminate();
    }

  }
}
}}}